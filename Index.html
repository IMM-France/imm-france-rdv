<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Choix rendez-vous IMM France</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    h1 {
      text-align: center;
    }
    .card {
      background: #ffffff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-top: 20px;
    }
    label {
      font-weight: bold;
    }
    select, button {
      padding: 8px 10px;
      margin: 5px 0 15px;
      border-radius: 6px;
      border: 1px solid #ccc;
      width: 100%;
      max-width: 300px;
    }
    .list-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 6px 0;
      border-bottom: 1px solid #eee;
    }
    .list-item:last-child {
      border-bottom: none;
    }
    .name {
      flex: 1;
    }
    .priority {
      margin-left: 10px;
    }
    button {
      cursor: pointer;
      border: none;
      background: #007bff;
      color: white;
      font-weight: bold;
    }
    button:hover {
      background: #005fcc;
    }
    .info {
      font-size: 0.9em;
      color: #555;
      margin-bottom: 10px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      padding: 8px;
      border-bottom: 1px solid #ddd;
      text-align: left;
    }
  </style>
</head>
<body>

  <h1>IMM France ‚Äì Choix de rendez-vous</h1>

  <div class="card">
    <p class="info">
      S√©lectionne ton profil, puis ton nom, et choisis les personnes que tu souhaites rencontrer.
    </p>

    <!-- Choix du type de profil -->
    <label for="role">Je suis :</label><br>
    <select id="role">
      <option value="">-- S√©lectionner --</option>
      <option value="exposant">Exposant</option>
      <option value="journaliste">Journaliste</option>
    </select><br>

    <!-- Choix du nom (charg√© selon r√¥le) -->
    <label for="person">Mon nom :</label><br>
    <select id="person">
      <option value="">-- Choisir d'abord un r√¥le --</option>
    </select>

    <!-- Liste dynamique des personnes en face -->
    <div id="choices" class="card" style="display:none; margin-top:15px;">
      <h2 id="choices-title"></h2>
      <div id="choices-list"></div>
      <button id="submit-btn">Envoyer mes choix</button>
      <p class="info">
        (Dans une vraie version, ce bouton enverrait tes r√©ponses vers un fichier ou un tableau partag√©.)
      </p>
    </div>
  </div>

  <!-- Tableau r√©capitulatif lisible -->
  <div id="results-card" class="card" style="display:none;">
    <h2>R√©capitulatif des demandes</h2>
    <table>
      <thead>
        <tr>
          <th>R√¥le</th>
          <th>Nom</th>
          <th>Souhaite voir</th>
          <th>Priorit√©</th>
        </tr>
      </thead>
      <tbody id="results-body"></tbody>
    </table>
  </div>

  <script>
    // üëâ Modifie ces listes selon ton salon IMM France
    const exposants = [
      "Deporte+",
      "SportMax",
      "RunFast",
      "ProFitness"
    ];

    const journalistes = [
      "Marie Dupont ‚Äì Le Sportif",
      "Lucas Martin ‚Äì Sport&Co",
      "Ana√Øs Leroy ‚Äì Journal du Sport",
      "Pierre Laurent ‚Äì TV Stade"
    ];

    const roleSelect = document.getElementById('role');
    const personSelect = document.getElementById('person');
    const choicesBlock = document.getElementById('choices');
    const choicesTitle = document.getElementById('choices-title');
    const choicesList = document.getElementById('choices-list');
    const submitBtn = document.getElementById('submit-btn');

    const resultsCard = document.getElementById('results-card');
    const resultsBody = document.getElementById('results-body');

    let currentRole = "";

    roleSelect.addEventListener('change', () => {
      currentRole = roleSelect.value;
      personSelect.innerHTML = "";
      const defaultOption = document.createElement('option');
      defaultOption.value = "";
      defaultOption.textContent = "-- S√©lectionner ton nom --";
      personSelect.appendChild(defaultOption);

      let list;
      if (currentRole === "exposant") list = exposants;
      else if (currentRole === "journaliste") list = journalistes;
      else list = [];

      list.forEach(name => {
        const opt = document.createElement('option');
        opt.value = name;
        opt.textContent = name;
        personSelect.appendChild(opt);
      });

      choicesBlock.style.display = "none";
    });

    personSelect.addEventListener('change', () => {
      const personName = personSelect.value;
      if (!personName) {
        choicesBlock.style.display = "none";
        return;
      }

      choicesBlock.style.display = "block";

      let targets;
      if (currentRole === "exposant") {
        choicesTitle.textContent = "Journalistes que je souhaite rencontrer";
        targets = journalistes;
      } else {
        choicesTitle.textContent = "Exposants que je souhaite rencontrer";
        targets = exposants;
      }

      // Construire la liste
      choicesList.innerHTML = "";
      targets.forEach((name, index) => {
        const row = document.createElement('div');
        row.className = "list-item";

        const label = document.createElement('label');
        label.className = "name";
        const checkbox = document.createElement('input');
        checkbox.type = "checkbox";
        checkbox.value = name;
        checkbox.id = `choice-${index}`;

        const span = document.createElement('span');
        span.textContent = " " + name;

        label.appendChild(checkbox);
        label.appendChild(span);

        const prioritySelect = document.createElement('select');
        prioritySelect.className = "priority";
        ["-- priorit√© --", "1", "2", "3"].forEach((p, i) => {
          const opt = document.createElement('option');
          opt.value = i === 0 ? "" : p;
          opt.textContent = p;
          prioritySelect.appendChild(opt);
        });

        row.appendChild(label);
        row.appendChild(prioritySelect);

        choicesList.appendChild(row);
      });
    });

    submitBtn.addEventListener('click', () => {
      const personName = personSelect.value;
      if (!personName) {
        alert("Merci de choisir ton nom.");
        return;
      }

      const rows = choicesList.querySelectorAll('.list-item');
      const selections = [];

      rows.forEach(row => {
        const checkbox = row.querySelector('input[type="checkbox"]');
        const prioritySelect = row.querySelector('select');
        if (checkbox.checked) {
          selections.push({
            cible: checkbox.value,
            priorite: prioritySelect.value || ""
          });
        }
      });

      if (selections.length === 0) {
        alert("Merci de s√©lectionner au moins une personne.");
        return;
      }

      resultsCard.style.display = "block";

      selections.forEach(sel => {
        const tr = document.createElement('tr');

        tr.innerHTML = `
          <td>${currentRole === "exposant" ? "Exposant" : "Journaliste"}</td>
          <td>${personName}</td>
          <td>${sel.cible}</td>
          <td>${sel.priorite || "-"}</td>
        `;

        resultsBody.appendChild(tr);
      });

      alert("Tes choix ont √©t√© ajout√©s au tableau !");
    });
  </script>

</body>
</html>
